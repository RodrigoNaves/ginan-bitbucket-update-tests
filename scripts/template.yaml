# PEA yaml template

input_files:

    root_input_directory: /data/acs/pea/proc/exs/products/

    atxfiles:   [igs14.atx                                  ]
    snxfiles:   ["*.snx"                                    ]
    blqfiles:   [OLOAD_GO.BLQ                               ]
    navfiles:   ["BRDC00IGS_R_*0000_01D_MN.rnx"             ]
    sp3files:   ["*.sp3"                                    ]
    clkfiles:   ["*.clk"                                    ]
    #erpfiles:  [igs19P2062.erp                             ]
    #dcbfiles   [CAS0MGXRAP_20191990000_01D_01D_DCB.BSX     ]
    #podfiles:  [orb_partials/gag20624_orbits_partials.out  ]


station_data:

    root_stations_directory: /data/acs/pea/proc/exs/data/

    rnxfiles: ['']

output_files:

    root_output_directory:          /data/acs/pea/output/examples/

    output_trace:                   true
    trace_level:                    3
    trace_directory:                ./
    trace_filename:                 <STATION>_.TRACE

    output_residuals:               true

    output_persistance:             false
    input_persistance:              false
    persistance_directory:          ./
    persistance_filename:           <CONFIG>.persist

    output_config:                  true

    output_summary:                 false
    summary_directory:              ./
    summary_filename:               <CONFIG>-<YYYY><DDD><HH>.SUM

    output_mongo_measurements:      false
    output_mongo_states:            false
    output_mongo_metadata:          false
    delete_mongo_history:           false    
    
    output_ionex:                   false
    ionex_directory:                ./
    ionex_filename:                 IONEX.ionex
    iondsb_filename:                IONEX.iondcb

    output_clocks:                  false
    clocks_directory:               ./
    clocks_filename:                <CONFIG>.clk


output_options:

    config_description:             ExTemplate
    analysis_agency:                GAA
    analysis_center:                Geoscience Australia
    analysis_program:               AUSACS
    rinex_comment:                  AUSNETWORK1


processing_options:

    start_epoch:               2019-07-18 00:00:00
    end_epoch:                 2019-07-18 23:59:30
    max_epochs:                 0        #0 is infinite
    epoch_interval:             30          #seconds

    process_modes:
        user:                   true
        network:                false
        minimum_constraints:    false
        rts:                    false
        ionosphere:             false
        unit_tests:             false

    process_sys:
        gps:            true
        glo:            false
        gal:            false
        bds:            false

    elevation_mask:     10   #degrees

    tide_solid:         true
    tide_pole:          true
    tide_otl:           true

    phase_windup:       true
    reject_eclipse:     true            #  reject observation during satellite eclipse periods
    raim:               true
    antexacs:           true

    cycle_slip:
        thres_slip: 0.05

    max_inno:   0
    max_gdop:   30

    troposphere:
        model:      gpt2 #vmf3
        #vmf3dir:    grid5/
        orography:  orography_ell_5x5
        gpt2grid: gpt_25.grd

    pivot_station:        "USN7"
    pivot_satellite:      "G01"

    code_priorities: [  L1C, L1P, L1Y, L1W, L1M, L1N, L1S, L1L,
                        L2W, L2P, L2Y, L2C, L2M, L2N, L2D, L2S, L2L, L2X,
                        L5I, L5Q, L5X]

unit_test_options:

    filename:       "/data/acs/pea/tests/ExTemplate"
    stop_on_fail:   false
    stop_on_done:   true
    output_errors:  true
    absorb_errors:  false
    output_pass:    true

ionosphere_filter_parameters:

    model:        spherical_caps # bspline, spherical_harmonics
    lat_center:   -25
    lon_center:   135
    lat_width:    50
    lon_width:    80
    lat_resol:    20
    lon_resol:    32
    func_order:   4
    layer_heights: [450]
    model_noise:    0.001
    max_filter_iterations:  1
    max_filter_removals:    0


user_filter_parameters:

    max_filter_iterations:      2
    max_filter_removals:        2

    rts_lag:                    -1      #-ve for full reverse, +ve for limited epochs
    rts_directory:              ./
    rts_filename:               PPP-<CONFIG>-<STATION>.rts

network_filter_parameters:

    process_mode:           kalman      #lsq

    max_filter_iterations:      2
    max_filter_removals:        2


default_filter_parameters:

    stations:

        error_model:        elevation_dependent         #uniform elevation_dependent
        code_sigmas:        [0.15]
        phase_sigmas:       [0.0015]

        pos:
            estimated:          true
            sigma:              [0.1]
            proc_noise:         [0.003]
            proc_noise_dt:      second
            #apriori:                               # taken from other source, rinex file etc.
            #frame:              xyz #ned
            #proc_noise_model:   Gaussian

        clk:
            estimated:          true
            sigma:              [0]
            proc_noise:         [1.8257418583505538]
            #proc_noise_model:   Gaussian

        clk_rate:
            estimated:          false
            sigma:              [500]
            proc_noise:         [1e-4]
            clamp_max:          [+500]
            clamp_min:          [-500]

        amb:
            estimated:          true
            sigma:              [60]
            proc_noise:         [0]
            #proc_noise_dt:      day
            #proc_noise_model:   RandomWalk

        trop:
            estimated:          true
            sigma:              [0.1]
            proc_noise:         [0.3]
            proc_noise_dt:      hour
            #proc_noise_model:   RandomWalk

        trop_grads:
            estimated:          false
            sigma:              [1]
            proc_noise:         [0]
            #proc_noise_dt:      hour
            #proc_noise_model:   RandomWalk

    satellites:

        clk:
            estimated:          true
            sigma:              [0]
            proc_noise:         [0.03651483716701108]
            #proc_noise_dt:      min
            #proc_noise_model:   RandomWalk

        clk_rate:
            estimated:          false
            sigma:              [500]
            proc_noise:         [1e-4]
            clamp_max:          [+500]
            clamp_min:          [-500]

        orb:
            estimated:          false


override_filter_parameters:

    stations:
        #ALICAUS01:
            #pos:
                #sigma:              [0.001]
                #proc_noise:         [0]
                ##proc_noise_model:   Gaussian
            #clk:
                #sigma:              [0.01]

        #AGGO:
            #exclude: true
        #ALIC:
            #exclude: true
        #ANKR:
            #exclude: true
                #network_estimated:  false

    satellites:

        ### Constellation Overrides
        #SYS_GPS:
            #srp:
                #sigma:              [0.01]
                #proc_noise:         [0.001]
                ##proc_noise_model:   RandomWalk

        #SYS_GAL:
            #clk:
                #sigma:              [1.0]
                #proc_noise:         [0.01]
                ##proc_noise_model:   RandomWalk

        #### Block Type Overrides
        #GPS-IIR-A:
            #pos: { sigma: [10.0] }
            #vel: { sigma: [0.1] }

        ### PRN Overrides
        #PRN_G10:
            #pos: { sigma: [10.0]    }
            #vel: { sigma: [0.1]     }
            #clk: { sigma: [1.0]     }

        #PRN_G15:
            #exclude: true

        ### SVN Overrides
        #SVN_G265:
            #pos: {sigma: [10.0] }
            #vel: {sigma: [0.1]  }


#minimum_constraints:

    #process_mode:       lsq     #kalman

    #estimate:
        #translation:    true
        #rotation:       true
        #scale:          false   #not yet implemented

    #station_default_noise: -1        #constrain none by default (negative numbers are not constrained)
    #station_default_noise: +1       #constrain all by default


    #station_noise:
        #ALIC: 0.001     #constrain strongly
        #BAKR: 1
        #ALIC: 100       #constrain weakly
