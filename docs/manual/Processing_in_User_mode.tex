<<<<<<< HEAD
\chapter{Processing in end user mode}
When set to end user mode, the PEA component of Ginan will process each station separately. This mode will allow the estimation of parameters avaialable to users with single receivers. Expected application of this processing mode are
\begin{itemize}
	\item Estimate the position of a static point
	\item Track the path of a moving vehicle
	\item Monitor atmospheric conditions around the receiver
	\item Sychronise a locak clock
\end{itemize}
The end user  mode of the PEA is based on precise point positioning technique

\newthought{Precise Point Positioning}(PPP) is a GNSS positioning method, originally developed, for calculating location of autonomous receivers with high levels of accuracy and precision. PPP aims to calculate the end user position by rigorously modelling and/or estimating error sources in GNSS measurements. 


Parameters that can potentially be estimated in end user mode are:
\begin{itemize}
	\item Antenna position
	\item Receiver clock offset
	\item Tropospheric delay at receiver location
	\item Ionospheric delay at the receiver location (not yet available)
	\item Carrier phase ambiguities
\end{itemize}

\section{PEA PPP Processing examples}
Examples of end user processing using the PEA follows. GINAN applications use YAML format to define configuration files. After installing the dependencies and compiling building the PEA application, the PEA processing can be started by typing the command 
\begin{verbatim}
$ ./pea --config <path_to_config_file>
\end{verbatim}
=======
\chapter{Processing in Precise Point Positioning mode}

\textit{Precise Point Positioning}(PPP)
>>>>>>> origin/latex_simplify

Details on the configuration parameters included in YAML files can be found in chapter \ref{pea_yaml_configuration}. The processing results for each receiver can be found on the trace files. The name of these output files can be set by the user, in the examples below they will typically be *.TRACE files.

<<<<<<< HEAD
\textbf{Receiver position}  results are preceded by the "\$POS" label and thus, in Linux, can be extracted using the command:
 \begin{verbatim}
$ grep "$POS" <path_to_trace_file>
\end{verbatim}
the output line for the for receiver position will have 10 comma separated fields with the following format:
\begin{verbatim}
$POS,2166,278015.000,6,-4052053.0060,4212836.8682,-2545105.0796,0.0245227,0.0231919,0.0163678
\end{verbatim}
the fields represent, from left to right:
\begin{enumerate}
	\item  "\$POS" label
	\item  GPS week
	\item  GPS TOW in seconds
	\item  Solution type (6 for float PPP, 1 for ambiguity fixed PPP)
	\item  Receiver ECEF X position in meters
	\item  Receiver ECEF Y position in meters
	\item  Receiver ECEF Z position in meters
	\item  Standard deviation of ECEF X positions in meters
	\item  Standard deviation of ECEF X positions in meters
	\item  Standard deviation of ECEF X positions in meters
\end{enumerate}

\textbf{Receiver clock} offset results are preceded by the "\$CLK" label and thus, in Linux, can be extracted using the command:
 \begin{verbatim}
$ grep "$CLK" <path_to_trace_file>
\end{verbatim}
the output line for the for receiver position will have 13 comma separated fields with the following format:
\begin{verbatim}
$CLK,2166,278015.000,6,14,3.1902,0.0000,1.1924,0.0000,0.0860,0.0000,0.0953,0.0000
\end{verbatim}
the fields represent, from left to right:
\begin{enumerate}
	\item  "\$CLK" label
	\item  GPS week
	\item  GPS TOW in seconds
	\item  Solution type (6 for float PPP, 1 for ambiguity fixed PPP)
	\item  Number of satellites used in the solution
	\item  Receiver clock offset for with respect to GPS clock, in nanoseconds
	\item  Receiver clock offset for with respect to GLONASS clock, in nanoseconds
	\item  Receiver clock offset for with respect to Galileo clock, in nanoseconds
	\item  Receiver clock offset for with respect to Beidou clock, in nanoseconds	
	\item  Standard deviation of clock offset wrt. GPS, in nanoseconds
	\item  Standard deviation of clock offset wrt. GLONASS, in nanoseconds
	\item  Standard deviation of clock offset wrt. Galileo, in nanoseconds
	\item  Standard deviation of clock offset wrt. Beidou, in nanoseconds	
\end{enumerate}
If clock offsets for a particular constellation are not available both the offset and its variance will be set to 0.


\textbf{Tropospheric delays} at the receiver position are preceded by the "\$TROP" label and thus, in Linux, can be extracted using the command:
 \begin{verbatim}
$ grep "$TROP" <path_to_trace_file>
\end{verbatim}
the tropospheric delay solutions will be represented to either a single line, with the "\$TROP" or three lines, as follows:
\begin{verbatim}
$TROP,2166,278015.000,6,14,2.294950,0.0030977
$TROP_N,2166,278015.000,6,14,-0.174797,0.0181385
$TROP_E,2166,278015.000,6,14,-0.223868,0.0250276
\end{verbatim}
each of the troposphere output line will contain 7 comma separated field, of which the first five are:
\begin{enumerate}
	\item  Label, "\$TROP", "\$TROP\_N" or "\$TROP\_E"
	\item  GPS week
	\item  GPS TOW in seconds
	\item  Solution type (6 for float PPP, 1 for ambiguity fixed PPP)
	\item  Number of satellites used in the solution
\end{enumerate}
The line starting with "\$TROP" contain the Zenith Tropospheric Delay (ZTD) and its standards deviation, both in meters, as their last two fields.  The line starting with "\$TROP\_N" contains the tropospheric delay gradient in north-south direction, and  the line starting with "\$TROP\_E" contains the tropospheric delay gradient in east-west direction.

Configuration files for specific examples have been added to the \textit{examples} folder in the repository. Examples corresponding to end user processing are explained bellow.

\subsection{Post processed PPP solutions with floating ambiguities using IF combination}
The configuration file named \textit{examples/ex11_pea_pp_user_gps.yaml} sets the PEA to calculate a post-process end user solution for a static receiver. 
 
=======
\begin{lstlisting}[language=bash]
$ ./pea --config ../../config/Ex01-IF-PPP.yaml
$ grep "\$POS" /data/acs/pea/output/exs/EX01_IF/EX01_IF-ALIC.TRACE
\end{lstlisting}

And you should see the following: 
\begin{lstlisting}[language=bash] 
$POS,2062,431940.000,0,-4052052.7956,4212836.0144,-2545104.6423,...
$POS,2062,431970.000,0,-4052052.7956,4212836.0144,-2545104.6423,...
\end{lstlisting}


\subsection{Using the Ionosphere-free observable to process a static data set - the float solution}

>>>>>>> origin/latex_simplify
In this example we will process 24 hours of data from a permanent reference frame station. The algorithm will use an L1+L2 and L1+L5 ionosphere-free combination.
The log files and processing results can be found in `<path to pea>/output/exs/EX01\_IF/`.
\begin{lstlisting}
$ ./pea --config ../../config/EX01-IF-PPP.yaml
\end{lstlisting}
The pea will then have the following output in <path to pea>/output/exs/EX01\_IF/ :

EX01\_IF20624.snx              - contains the station position estimates in SINEX format
EX01\_IF-ALIC2019199900.TRACE  - contains the logging information from the processing run

\begin{lstlisting}[language=bash]
$ grep "REC_POS" /data/acs/pea/output/exs/EX01_IF/EX01_IF-ALIC201919900.TRACE > ALIC_201919900.PPP
\end{lstlisting}
This will pipe all of the receiver position results reported in the station trace file to a seperate file for plotting.
\begin{lstlisting}[language=bash]
$ python3 /data/acs/pea/python/source/pppPlot.py --ppp /data/acs/pea/output/exs/EX01_IF/ALIC_201919900.PPP
\end{lstlisting}
This will then create the plots alic\_pos.png, a time series of the difference between the estimated receiver position and the median estimated position.
And the plot alic\_snx\_pos.png, a time series of the difference between the estimated receiver position and the IGS SINEX solution for Alic Springs on this day.

\subsection{Single Frequency Processing} 
\begin{lstlisting}[language=bash]
$ ./pea --config ../../config/Ex01-SF-PPP.yaml

$ grep "\$POS" /data/acs/pea/output/exs/EX01_SF/EX01_SF-ALBY202011500.TRACE
\end{lstlisting}
And you should see something similar to the following:
\begin{lstlisting}[language=bash]
$POS,2062,431940.000,0,-4052052.7956,4212836.0144,-2545104.6423,0.00000043966020,...
$POS,2062,431970.000,0,-4052052.7956,4212836.0144,-2545104.6423,0.00000043965772,...
\end{lstlisting}



\subsection{Processing realtime}
To process a continuous GPS station in real-time you will need to access the data stream from a NTRIP stream and the correction products from a NTRIPCaster.
Geoscience Australia is running a caster that provides global data stream, a dense network of stream covering the Australian region, and correction procdust provide by IGS Analysis Centres.
You will need to apply for an AUSCORS account, or use the new NTRIPCaster that streams using https.

You can apply for an account at the following link : \href{https://gnss-users-prod.auth.ap-southeast-2.amazoncognito.com/login?response_type=code&client_id=11njl767q0tl1faf9qna469vl1&redirect_uri=https://search-gnss-elasticsearch-prod-5omhch5quzlu5dcpbct4ev5qz4.ap-southeast-2.es.amazonaws.com/_plugin/kibana/app/kibana&state=e36b2054-7ace-4931-91a3-5ba6de893917}{New GA Account link}

Once your have your account and password you can test that you can successfuly connect to the NTRIPCaster by using the following curl command:
\begin{lstlisting}[language=bash]
$ curl https://ntrip.data.gnss.ga.gov.au/MOBS00AUS0 --http0.9 -i -u'<username>:<password> --output -'
\end{lstlisting}

